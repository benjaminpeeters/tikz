\documentclass[12pt, border=0pt,crop=true,preview=false]{standalone}

% Packages needed
\usepackage{tikz}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage[english,french]{babel}
\usepackage[T1]{fontenc}

% Define custom colors 
\definecolor{myred}{RGB}{200,50,50}
\definecolor{myblue}{RGB}{50,100,200}
\definecolor{mygreen}{RGB}{50,150,80}
\definecolor{myorange}{RGB}{255,140,0}
\definecolor{mypurple}{RGB}{148,0,211}
\definecolor{mydarkred}{RGB}{139,0,0}
\definecolor{mylightblue}{RGB}{173,216,230}
\definecolor{mylightgreen}{RGB}{144,238,144}

\usetikzlibrary{patterns}
\usetikzlibrary{patterns.meta}
\usetikzlibrary{calc}
\usetikzlibrary{math}
\usetikzlibrary{positioning}
\usetikzlibrary{arrows.meta}

\begin{document}

\centering
\begin{tikzpicture}[node distance=2cm, auto, 
    >=Stealth,
    scale=0.7,
    transform shape,
    font=\tiny]

    % Define styles for different node types
    \tikzset{
        phase node/.style={
            rectangle, 
            align=center, 
            draw=myblue, 
            fill=mylightblue,
            line width=2pt,
            text width=5cm,
            minimum height=1cm,
            rounded corners=3pt
        },
        trigger node/.style={
            rectangle, 
            align=center, 
            draw=myred, 
            fill=red!20,
            line width=1.5pt,
            text width=2.5cm,
            minimum height=0.8cm,
            rounded corners=2pt
        },
        transmission node/.style={
            rectangle, 
            align=center, 
            draw=myorange, 
            fill=orange!15,
            line width=1pt,
            text width=2.2cm,
            minimum height=0.7cm,
            rounded corners=2pt
        },
        effect node/.style={
            rectangle, 
            align=center, 
            draw=mygreen, 
            fill=mylightgreen,
            line width=1pt,
            text width=2cm,
            minimum height=0.7cm,
            rounded corners=2pt
        },
        geo node/.style={
            rectangle, 
            align=center, 
            draw=mypurple, 
            fill=purple!15,
            line width=1pt,
            text width=1.8cm,
            minimum height=0.6cm,
            rounded corners=2pt
        }
    }

    % PHASE 1 - Rotated time marker on the left
    \node[anchor=south, rotate=90, font=\small\bfseries, align=center] at (-12,3) {
        PHASE 1 (1979-1986) \\ Volcker Shock \& Global Debt Crisis
    };

    % Phase 1 Sub-phases
    \node[trigger node] (trigger1a) at (-9,6) {
        \textbf{Volcker Shock} \\
        Fed rates: 4\% $\rightarrow$ 20\% \\
        (Oct 1979 - Jul 1981)
    };
    
    \node[trigger node] (trigger1b) at (-3,6) {
        \textbf{Second Oil Shock} \\
        Oil: \$15 $\rightarrow$ \$35/barrel \\
        Iranian Revolution (1979)
    };

    \node[trigger node] (trigger1c) at (3,6) {
        \textbf{Global Recession} \\
        Center economies \\
        contract (-2\% GDP)
    };

    \node[trigger node] (trigger1d) at (9,6) {
        \textbf{Commodity Collapse} \\
        Non-oil prices fall \\
        30-50\% (1980-1986)
    };

    % Transmission mechanisms
    \node[transmission node] (trans1a) at (-9,4) {
        \textbf{Interest Rate} \\
        \textbf{Transmission} \\
        LIBOR surge \\
        Real rates positive
    };
    
    \node[transmission node] (trans1b) at (-3,4) {
        \textbf{Liquidity Drought} \\
        Petrodollar recycling \\
        ends, bank lending \\
        stops abruptly
    };

    \node[transmission node] (trans1c) at (3,4) {
        \textbf{Trade Channel} \\
        Export demand falls \\
        Import prices rise \\
        Terms of trade worsen
    };

    \node[transmission node] (trans1d) at (9,4) {
        \textbf{Fiscal Channel} \\
        Commodity revenues \\
        collapse, budget \\
        deficits explode
    };

    % Effects
    \node[effect node] (effect1a) at (-9,2) {
        \textbf{Debt Crisis} \\
        Variable rate debt \\
        service multiplies \\
        5-fold
    };
    
    \node[effect node] (effect1b) at (-3,2) {
        \textbf{Balance of Payments} \\
        Current account \\
        deficits become \\
        unsustainable
    };

    \node[effect node] (effect1c) at (3,2) {
        \textbf{Banking Crisis} \\
        NPLs rise sharply \\
        Credit crunch \\
        deepens recession
    };

    \node[effect node] (effect1d) at (9,2) {
        \textbf{Social Crisis} \\
        GDP falls 10-15\% \\
        Unemployment \\
        doubles
    };

    % Geographic spread for Phase 1
    \node[geo node] (geo1a) at (-9,0) {
        \textbf{Latin America} \\
        Mexico (Aug '82) \\
        Brazil, Argentina \\
        Chile, Venezuela
    };
    
    \node[geo node] (geo1b) at (-3,0) {
        \textbf{Eastern Europe} \\
        Poland (1981) \\
        Hungary, Romania \\
        Yugoslavia
    };

    \node[geo node] (geo1c) at (3,0) {
        \textbf{Asia \& Africa} \\
        Philippines, Turkey \\
        Morocco, Nigeria \\
        South Africa
    };

    \node[geo node] (geo1d) at (9,0) {
        \textbf{Oil Exporters} \\
        Mexico, Venezuela \\
        Indonesia, Nigeria \\
        (delayed impact)
    };

    % PHASE 2 - Rotated time marker on the left
    \node[anchor=south, rotate=90, font=\small\bfseries, align=center] at (-12,-7.5) {
        PHASE 2 (1987-1992) \\ Counter Oil Shock \& Transition
    };

    % Phase 2 Sub-phases
    \node[trigger node] (trigger2a) at (-9,-4.5) {
        \textbf{Counter Oil Shock} \\
        Oil: \$27 $\rightarrow$ \$10/barrel \\
        (Dec 1985 - 1986)
    };
    
    \node[trigger node] (trigger2b) at (-3,-4.5) {
        \textbf{USSR Collapse} \\
        Eastern European \\
        transition begins \\
        (1989-1991)
    };

    \node[trigger node] (trigger2c) at (3,-4.5) {
        \textbf{Greenspan Era} \\
        Black Monday response \\
        S\&L crisis \\
        (1987-1991)
    };

    \node[trigger node] (trigger2d) at (9,-4.5) {
        \textbf{Brady Plan} \\
        Debt restructuring \\
        \& reduction \\
        (1989)
    };

    % Phase 2 Transmission
    \node[transmission node] (trans2a) at (-9,-6.5) {
        \textbf{Fiscal Crisis} \\
        Oil exporters lose \\
        60\% of revenues \\
        overnight
    };
    
    \node[transmission node] (trans2b) at (-3,-6.5) {
        \textbf{Systemic Shock} \\
        Command economy \\
        collapse, market \\
        transition chaos
    };

    \node[transmission node] (trans2c) at (3,-6.5) {
        \textbf{Capital Flight} \\
        Contagion from \\
        continuing LatAm \\
        instability
    };

    \node[transmission node] (trans2d) at (9,-6.5) {
        \textbf{Debt Overhang} \\
        Investment deterred \\
        by unsustainable \\
        debt burdens
    };

    % Phase 2 Effects
    \node[effect node] (effect2a) at (-9,-8.5) {
        \textbf{Hyperinflation} \\
        Argentina: 5,000\% \\
        Brazil: 1,000\% \\
        (1989-1991)
    };
    
    \node[effect node] (effect2b) at (-3,-8.5) {
        \textbf{Output Collapse} \\
        Transition recession \\
        GDP falls 20-40\% \\
        (1991-1994)
    };

    \node[effect node] (effect2c) at (3,-8.5) {
        \textbf{Financial Sector} \\
        Banking sector \\
        restructuring \\
        \& consolidation
    };

    \node[effect node] (effect2d) at (9,-8.5) {
        \textbf{Structural Adjustment} \\
        Washington Consensus \\
        reforms imposed \\
        across region
    };

    % Geographic spread for Phase 2
    \node[geo node] (geo2a) at (-9,-10.5) {
        \textbf{Oil Exporters} \\
        Algeria, Venezuela \\
        Iran, Nigeria \\
        Gabon, Angola
    };
    
    \node[geo node] (geo2b) at (-3,-10.5) {
        \textbf{Transition Econ.} \\
        Bulgaria, Romania \\
        Yugoslavia \\
        (1991-1994)
    };

    \node[geo node] (geo2c) at (3,-10.5) {
        \textbf{Continued LatAm} \\
        Argentina, Brazil \\
        Uruguay, Paraguay \\
        hyperinflation
    };

    \node[geo node] (geo2d) at (9,-10.5) {
        \textbf{Commodity Exp.} \\
        CÃ´te d'Ivoire \\
        (cocoa \& coffee) \\
        Other African
    };

    % Connecting arrows within Phase 1 (no arrows from phase markers)
    \foreach \i in {a,b,c,d} {
        \draw[->, thick] (trigger1\i) -- (trans1\i);
        \draw[->, thick] (trans1\i) -- (effect1\i);
    }

    % Geographic spread arrows for Phase 1
    \draw[->, thick] (effect1a) -- (geo1a);
    \draw[->, thick] (effect1b) -- (geo1b);
    \draw[->, thick] (effect1c) -- (geo1c);
    \draw[->, thick] (effect1d) -- (geo1d);

    % Contagion arrows within Phase 1
    \draw[->, dotted, thick, color=red] (geo1a) -- (geo1b);
    \draw[->, dotted, thick, color=red] (geo1b) -- (geo1c);
    \draw[->, dotted, thick, color=red] (geo1a) -- (geo1c);

    % Phase transition - connecting some Phase 1 effects to Phase 2 triggers
    \draw[->, line width=3pt, dashed, color=myblue] (effect1a) -- (trigger2d);
    \draw[->, line width=3pt, dashed, color=myblue] (effect1b) -- (trigger2a);

    % Connecting arrows within Phase 2 (no arrows from phase markers)
    \foreach \i in {a,b,c,d} {
        \draw[->, thick] (trigger2\i) -- (trans2\i);
        \draw[->, thick] (trans2\i) -- (effect2\i);
    }

    % Geographic spread arrows for Phase 2
    \draw[->, thick] (effect2a) -- (geo2a);
    \draw[->, thick] (effect2b) -- (geo2b);
    \draw[->, thick] (effect2c) -- (geo2c);
    \draw[->, thick] (effect2d) -- (geo2d);

    % Continuity arrows from Phase 1 to Phase 2
    \draw[->, densely dashed, thick, color=gray] (geo1a) -- (geo2c);
    \draw[->, densely dashed, thick, color=gray] (geo1d) -- (geo2a);
    \draw[->, densely dashed, thick, color=gray] (geo1b) -- (geo2b);


    % Clean legend at the bottom
    \begin{scope}[shift={(0,-14)}, xshift=0cm, yshift=0cm]
        % Node types - properly spaced
        \node[phase node, text width=0.8cm, minimum height=0.25cm] at (-6,1.5) {};
        \node[anchor=north, font=\scriptsize, align=center] at (-6,1.2) {Major\\Phases};
        
        \node[trigger node, text width=0.8cm, minimum height=0.25cm] at (-4,1.5) {};
        \node[anchor=north, font=\scriptsize, align=center] at (-4,1.2) {Crisis\\Triggers};
        
        \node[transmission node, text width=0.8cm, minimum height=0.25cm] at (-2,1.5) {};
        \node[anchor=north, font=\scriptsize] at (-2,1.2) {Transmission};
        
        \node[effect node, text width=0.8cm, minimum height=0.25cm] at (0,1.5) {};
        \node[anchor=north, font=\scriptsize, align=center] at (0,1.2) {Crisis\\Effects};
        
        \node[geo node, text width=0.8cm, minimum height=0.25cm] at (2,1.5) {};
        \node[anchor=north, font=\scriptsize, align=center] at (2,1.2) {Geographic\\Spread};
        
        % Arrow types - clean alignment
        \draw[->, thick] (-6.2,0.3) -- (-5.4,0.3);
        \node[anchor=west, font=\scriptsize] at (-5.3,0.3) {Causation};
        
        \draw[->, dotted, thick, color=red] (-3.5,0.3) -- (-2.7,0.3);
        \node[anchor=west, font=\scriptsize] at (-2.6,0.3) {Contagion};
        
        \draw[->, line width=2pt, dashed, color=myblue] (-0.8,0.3) -- (0,0.3);
        \node[anchor=west, font=\scriptsize] at (0.1,0.3) {Phase Transition};
        
        \draw[->, densely dashed, thick, color=gray] (3,0.3) -- (3.8,0.3);
        \node[anchor=west, font=\scriptsize] at (3.9,0.3) {Continuity};
    \end{scope}

\end{tikzpicture}

\end{document}
